#@base <http://purl.org/ontology/studio/mobile-example#> .
@prefix mb: <rdf/mobile.n3#> .
@prefix mt: <http://purl.org/ontology/studio/multitrack#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix ex: <#> .

ex:beat a mb:Segmentation ;
	mb:hasFeaturesPath "andante.json" .

ex:bar a mb:Segmentation ;
	mb:hasFeaturesPath "andante.json" ;
	mb:isSubset "1".

ex:beatDMO a mb:DMO ;
	mb:hasParameter ex:beat .

ex:barDMO a mb:DMO ;
	mb:hasParameter ex:bar ;
	mb:hasChild ex:beatDMO .

ex:moonDMO a mb:DMO ;
	mb:hasAudioPath "andante.m4a" ;
	mb:hasChild ex:barDMO .

ex:onsetMapping a mb:Mapping ;
	mb:hasDimension [ a mb:MappingDimension ;
		mb:fromControl [ a mb:GraphControl ] ;
		mb:withFunction [ a mb:LinearFunction ] ] ;
	mb:toDMO ex:beatDMO ;
	mb:toParameter ex:beat .

ex:onsetMapping2 a mb:Mapping ;
	mb:hasDimension [ a mb:MappingDimension ;
		mb:fromControl [ a mb:Slider ;
			rdfs:label "Beat" ] ;
		mb:withFunction [ a mb:LinearFunction ] ;
		mb:hasMultiplier 400 ] ;
	mb:toDMO ex:beatDMO ;
	mb:toParameter ex:beat .

ex:rateMapping a mb:Mapping ;
	mb:hasDimension [ a mb:MappingDimension ;
		mb:fromControl [ a mb:Slider ;
			rdfs:label "Rate" ] ;
		mb:withFunction [ a mb:LinearFunction ] ;
		mb:hasMultiplier 2 ] ;
	mb:toDMO ex:beatDMO ;
	mb:toParameter mb:PlaybackRate .

ex:countMapping a mb:Mapping ;
	mb:hasDimension [ a mb:MappingDimension ;
		mb:fromControl [ a mb:Slider ;
			rdfs:label "Beats per bar" ] ;
		mb:withFunction [ a mb:LinearFunction ] ;
		mb:hasMultiplier 4 ] ;
	mb:toDMO ex:beatDMO ;
	mb:toParameter mb:SegmentCount .

ex:durationRatioMapping a mb:Mapping ;
	mb:hasDimension [ a mb:MappingDimension ;
		mb:fromControl [ a mb:Slider ;
			rdfs:label "Beat duration" ] ;
		mb:withFunction [ a mb:LinearFunction ] ;
		mb:hasMultiplier 2 ] ;
	mb:toDMO ex:beatDMO ;
	mb:toParameter mb:SegmentDurationRatio .

ex:proportionMapping a mb:Mapping ;
	mb:hasDimension [ a mb:MappingDimension ;
		mb:fromControl [ a mb:Slider ;
			rdfs:label "Beat proportion" ] ;
		mb:withFunction [ a mb:LinearFunction ] ] ;
	mb:toDMO ex:beatDMO ;
	mb:toParameter mb:SegmentProportion .

ex:moon a mb:Rendering ;
	mb:hasDMO ex:moonDMO ;
	mb:hasMapping ex:onsetMapping, ex:onsetMapping2, ex:rateMapping, ex:countMapping, ex:durationRatioMapping, ex:proportionMapping ;
	rdfs:label "Features Demo" .
