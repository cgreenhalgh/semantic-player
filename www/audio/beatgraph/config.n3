#@base <http://purl.org/ontology/studio/mobile-example#> .
@prefix mb: <rdf/mobile.n3#> .
@prefix mt: <http://purl.org/ontology/studio/multitrack#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix ex: <#> .

ex:onset a mb:Segmentation ;
	mb:hasPath "moon.n3" ;
	mb:hasGraphPath "moon_graph.json" ;
	rdfs:label "Onset" .

ex:moon a mt:AudioTrack ;
	mb:hasAudioPath "moon.m4a" ;
	mb:hasParameter ex:onset .
	
ex:onsetGraphMapping a mb:Mapping ;
	mb:hasDimension [ a mb:MappingDimension ;
		mb:fromControl [ a mb:GraphControl ;
			mb:ofTrack ex:fandango ;
			mb:ofParameter mb:Beat ] ;
		mb:withFunction [ a mb:LinearFunction ] ] ;
	mb:toTrack ex:moon ;
	mb:toParameter ex:onset .

ex:onsetSliderMapping a mb:Mapping ;
	mb:hasDimension [ a mb:MappingDimension ;
		mb:fromControl [ a mb:Slider ;
			rdfs:label "Onset" ] ;
		mb:withFunction [ a mb:LinearFunction ] ;
		mb:hasMultiplier 400 ] ;
	mb:toTrack ex:moon ;
	mb:toParameter ex:onset .
		
ex:graphThresholdMapping a mb:Mapping ;
	mb:hasDimension [ a mb:MappingDimension ;
		mb:fromControl [ a mb:Slider ;
			rdfs:label "Onset threshold" ] ;
		mb:withFunction [ a mb:LinearFunction ] ] ;
	mb:toTrack ex:moon ;
	mb:toParameter ex:onset .

ex:moonOnsets a mb:Rendering;
	mt:track ex:moon ;
	mb:hasMapping ex:onsetGraphMapping, ex:onsetSliderMapping, ex:graphThresholdMapping ;
	rdfs:label "Graph Demo" .